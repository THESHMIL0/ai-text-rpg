<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>AI Text RPG</title>
  <style>
    :root{
      --neon:#00ff55;
      --neon-2:#32ff7e;
      --accent:#ffd700;
      --bg:#000;
      --card-border: 2px solid var(--neon);
    }
    html,body{height:100%;margin:0;background:var(--bg);font-family: "Courier New", monospace;color:var(--neon);-webkit-font-smoothing:antialiased}
    .wrap{
      min-height:100%;
      display:flex;
      align-items:center;
      justify-content:center;
      padding:24px;
      box-sizing:border-box;
    }
    .game {
      width:100%;
      max-width:720px;
      background:rgba(0,0,0,0.4);
      border-radius:12px;
      padding:18px;
      box-sizing:border-box;
      border:var(--card-border);
      box-shadow: 0 8px 30px rgba(0,255,120,0.04), inset 0 0 30px rgba(0,255,120,0.02);
    }

    header{ text-align:center; margin-bottom:12px }
    h1 { margin:0; font-size:28px; color:var(--neon); letter-spacing:2px }
    .top-grid{
      display:grid;
      grid-template-columns: 1fr 1fr;
      gap:12px;
      align-items:center;
      margin-top:12px;
    }

    .stats-card, .story {
      border-radius:8px;
      padding:12px;
      border:var(--card-border);
    }

    .stats-list{
      font-size:16px;
      line-height:1.65;
    }

    /* Health bars */
    .hp-row { margin-bottom:8px }
    .label { font-size:14px; opacity:0.9 }
    .bar {
      width:100%;
      height:18px;
      background: rgba(255,255,255,0.04);
      border-radius:10px;
      overflow:hidden;
      margin-top:6px;
      border:1px solid rgba(0,255,120,0.08);
    }
    .bar-inner {
      height:100%;
      width:100%;
      transition: width 220ms linear, background 220ms;
      background: linear-gradient(90deg,var(--neon) 0%, var(--neon-2) 100%);
    }
    .bar-inner.enemy {
      background: linear-gradient(90deg,#ff6b6b 0%, #ff8787 100%);
    }

    .story {
      min-height:76px;
      font-size:16px;
      white-space:pre-wrap;
      background: rgba(0,0,0,0.2);
    }

    /* choices */
    #choices { margin-top:12px; display:flex; flex-direction:column; gap:10px; }
    button.choice {
      background: var(--neon);
      color: #000;
      border: none;
      padding:14px 16px;
      font-size:16px;
      border-radius:8px;
      cursor:pointer;
      box-shadow: 0 6px 18px rgba(0,255,120,0.06);
      text-align:left;
    }
    button.choice:hover{ transform: translateY(-3px); background:#9cffb0 }
    .small { font-size:14px; padding:10px 12px }

    /* responsive */
    @media (max-width:560px){
      h1{ font-size:20px }
      .top-grid{ grid-template-columns: 1fr; }
      .stats-list{ font-size:15px }
      button.choice{ font-size:17px; padding:16px 18px }
    }
  </style>
</head>
<body>
  <div class="wrap">
    <main class="game" role="main" aria-labelledby="game-title">
      <header>
        <h1 id="game-title">AI Text RPG</h1>
      </header>

      <div class="top-grid">
        <div class="stats-card stats-list" aria-live="polite">
          ‚ù§Ô∏è Player HP: <strong id="playerHPText">20/20</strong><br>
          <div class="hp-row">
            <div class="label">Player Health</div>
            <div class="bar"><div id="playerBar" class="bar-inner" style="width:100%"></div></div>
          </div>

          üëæ Enemy HP: <strong id="enemyHPText">0</strong><br>
          <div class="hp-row">
            <div class="label">Enemy Health</div>
            <div class="bar"><div id="enemyBar" class="bar-inner enemy" style="width:0%"></div></div>
          </div>

          <div style="margin-top:8px">
            üí™ Strength: <span id="strengthText">5</span><br>
            ‚ú® Level: <span id="levelText">1</span><br>
            üåü XP: <span id="xpText">0</span><br>
            üß™ Potions: <span id="potionsText">1</span><br>
            üí∞ Gold: <span id="goldText">0</span>
          </div>
        </div>

        <section class="story" id="story" aria-live="assertive">Welcome to the adventure ‚Äî choose your path below.</section>
      </div>

      <div id="choices" role="region" aria-label="Choices" class="choices">
        <!-- buttons injected here -->
      </div>
    </main>
  </div>

  <script>
    /* ---------- Game state ---------- */
    let maxHP = 20;
    let playerHP = 20;
    let enemyHP = 0;
    let enemyMaxHP = 0;
    let strength = 5;
    let xp = 0;
    let level = 1;
    let potions = 1;
    let gold = 0;
    let currentEnemy = null;

    /* ---------- UI elements ---------- */
    const storyEl = document.getElementById('story');
    const choicesEl = document.getElementById('choices');

    const playerHPText = document.getElementById('playerHPText');
    const enemyHPText = document.getElementById('enemyHPText');
    const playerBar = document.getElementById('playerBar');
    const enemyBar = document.getElementById('enemyBar');

    const strengthText = document.getElementById('strengthText');
    const levelText = document.getElementById('levelText');
    const xpText = document.getElementById('xpText');
    const potionsText = document.getElementById('potionsText');
    const goldText = document.getElementById('goldText');

    /* ---------- Monsters ---------- */
    const monsters = [
      { name: "Goblin", hp: 10, dmg: 3, gold:5, xp:5, boss:false },
      { name: "Wolf", hp: 12, dmg: 4, gold:7, xp:6, boss:false },
      { name: "Bandit", hp: 14, dmg: 5, gold:10, xp:8, boss:false },
      { name: "Ogre", hp: 22, dmg: 8, gold:20, xp:15, boss:false },
      { name: "Ancient Guardian", hp: 50, dmg: 12, gold:60, xp:40, boss:true }
    ];

    /* ---------- Helpers ---------- */
    function clamp(v, a, b){ return Math.max(a, Math.min(b, v)); }

    function updateUI(){
      playerHPText.textContent = `${playerHP}/${maxHP}`;
      enemyHPText.textContent = enemyHP > 0 ? `${enemyHP}` : '‚Äî';
      strengthText.textContent = strength;
      levelText.textContent = level;
      xpText.textContent = xp;
      potionsText.textContent = potions;
      goldText.textContent = gold;

      // bar widths
      const pPerc = clamp((playerHP / maxHP) * 100, 0, 100);
      playerBar.style.width = pPerc + '%';
      if (pPerc < 30) playerBar.style.background = 'linear-gradient(90deg,#ff8b8b,#ff6b6b)';
      else playerBar.style.background = 'linear-gradient(90deg,var(--neon),var(--neon-2))';

      const ePerc = enemyMaxHP > 0 ? clamp((enemyHP / enemyMaxHP) * 100, 0, 100) : 0;
      enemyBar.style.width = ePerc + '%';
      if (ePerc < 25) enemyBar.style.opacity = 0.8; else enemyBar.style.opacity = 1;
    }

    function showStory(text){
      storyEl.textContent = text;
      // small auto-scroll behavior for long story (useful if the page got scrolled)
      window.scrollTo({ top: 0, behavior: 'smooth' });
    }

    function clearChoices(){ choicesEl.innerHTML = ''; }

    function setChoices(items){
      clearChoices();
      items.forEach(it => {
        const b = document.createElement('button');
        b.className = 'choice';
        b.textContent = it.text;
        b.onclick = it.action;
        choicesEl.appendChild(b);
      });
    }

    function levelCheck(){
      const need = level * 10;
      if (xp >= need){
        xp -= need;
        level++;
        strength += 2;
        maxHP += 5;
        playerHP = maxHP; // heal on level
        showStory(`üåü Level up! You reached level ${level}. Strength +2, Max HP +5.`);
        updateUI();
        setTimeout(startScreen, 1400);
        return true;
      }
      return false;
    }

    /* ---------- Gameplay ---------- */
    function startScreen(){
      showStory('You stand at a crossroads. Paths: Forest, Cave, Village.');
      setChoices([
        { text: 'üå≤ Enter the Forest', action: enterForest },
        { text: 'üï≥Ô∏è Explore the Cave', action: enterCave },
        { text: 'üèòÔ∏è Visit the Village', action: enterVillage }
      ]);
      updateUI();
    }

    function spawnEnemy(template){
      // clone template so we don't mutate the list
      currentEnemy = {...template};
      enemyHP = currentEnemy.hp;
      enemyMaxHP = currentEnemy.hp;
      updateUI();
    }

    function enterForest(){
      const choices = monsters.filter(m => !m.boss);
      const pick = choices[Math.floor(Math.random()*choices.length)];
      spawnEnemy(pick);
      showStory(`üå≤ A wild ${currentEnemy.name} appears!`);
      setChoices([
        { text: '‚öî Attack', action: attack },
        { text: 'üß™ Use Potion', action: usePotion },
        { text: 'üèÉ Run', action: startScreen }
      ]);
    }

    function enterCave(){
      // higher chance for tougher monsters
      const tough = monsters.filter(m => m.hp >= 14);
      const pick = tough[Math.floor(Math.random()*tough.length)];
      spawnEnemy(pick);
      showStory(`üï≥Ô∏è You encounter ${currentEnemy.name} in the cave!`);
      setChoices([
        { text: '‚öî Attack', action: attack },
        { text: 'üß™ Use Potion', action: usePotion },
        { text: 'üèÉ Retreat', action: startScreen }
      ]);
    }

    function enterVillage(){
      showStory('üèòÔ∏è You arrive at the village. Rest, shop, or leave?');
      setChoices([
        { text: 'üõå Rest (restore HP)', action: () => { playerHP = maxHP; showStory('You rested and feel refreshed.'); updateUI(); setTimeout(startScreen,800); } },
        { text: 'üõçÔ∏è Shop', action: openShop },
        { text: 'üö™ Leave', action: startScreen }
      ]);
    }

    function openShop(){
      showStory('Welcome to the shop. What will you buy?');
      setChoices([
        { text: 'üß™ Potion (5 gold)', action: buyPotion },
        { text: '‚öî Sword (+2 Strength, 25 gold)', action: buySword },
        { text: '‚¨Ö Back', action: enterVillage }
      ]);
    }

    function buyPotion(){
      if (gold >= 5){ gold -= 5; potions++; showStory('You purchased a potion.'); }
      else showStory('Not enough gold.');
      updateUI();
      setTimeout(openShop, 600);
    }
    function buySword(){
      if (gold >= 25){ gold -= 25; strength += 2; showStory('You bought a sword! Strength increased.'); updateUI(); }
      else showStory('Not enough gold.');
      setTimeout(openShop, 700);
    }

    function attack(){
      if (!currentEnemy) return;
      const pDmg = Math.floor(Math.random()*6) + Math.floor(strength/2);
      const eDmg = Math.floor(Math.random()*currentEnemy.dmg) + 1;

      enemyHP = Math.max(0, enemyHP - pDmg);
      playerHP = Math.max(0, playerHP - eDmg);

      if (enemyHP <= 0){
        gold += currentEnemy.gold;
        xp += currentEnemy.xp;
        const msg = `You struck ${currentEnemy.name} for ${pDmg}. It falls. You gained ${currentEnemy.gold} gold and ${currentEnemy.xp} XP.`;
        currentEnemy = null;
        enemyMaxHP = 0;
        enemyHP = 0;
        updateUI();
        if (!levelCheck()) {
          showStory(msg);
          setChoices([{ text: 'Continue', action: startScreen }]);
        }
      } else if (playerHP <= 0){
        showStory(`You took ${eDmg} damage and were defeated...`);
        setChoices([{ text: 'Restart', action: () => location.reload() }]);
      } else {
        showStory(`You hit for ${pDmg}. Enemy hits back for ${eDmg}.`);
        setChoices([
          { text: '‚öî Attack Again', action: attack },
          { text: 'üß™ Use Potion', action: usePotion },
          { text: 'üèÉ Run', action: startScreen }
        ]);
      }
      updateUI();
    }

    function usePotion(){
      if (potions <= 0){ showStory('No potions left!'); return; }
      potions--;
      playerHP = Math.min(maxHP, playerHP + 12);
      showStory('You used a potion and healed 12 HP.');
      updateUI();
      // return to combat choices if fighting
      if (currentEnemy && enemyHP > 0){
        setChoices([
          { text: '‚öî Attack', action: attack },
          { text: 'üß™ Use Potion', action: usePotion },
          { text: 'üèÉ Run', action: startScreen }
        ]);
      } else {
        setChoices([{ text: 'Continue', action: startScreen }]);
      }
    }

    /* ---------- Start ---------- */
    updateUI();
    startScreen();
  </script>
</body>
</html>