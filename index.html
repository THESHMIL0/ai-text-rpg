<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Carrom Pool</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            touch-action: manipulation;
        }
        
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(to bottom, #2c3e50, #1a1a2e);
            color: #fff;
            line-height: 1.6;
            height: 100vh;
            display: flex;
            flex-direction: column;
            overflow: hidden;
        }
        
        .container {
            max-width: 100%;
            padding: 10px;
            margin: 0 auto;
            height: 100vh;
            display: flex;
            flex-direction: column;
        }
        
        header {
            text-align: center;
            padding: 10px 0;
            background: rgba(0, 0, 0, 0.5);
            border-radius: 10px;
            margin-bottom: 10px;
            position: relative;
        }
        
        h1 {
            font-size: 1.8rem;
            color: #f39c12;
            text-shadow: 0 0 5px rgba(243, 156, 18, 0.7);
            margin-bottom: 5px;
        }
        
        .game-info {
            display: flex;
            justify-content: space-around;
            width: 100%;
            margin-top: 10px;
        }
        
        .info-item {
            display: flex;
            flex-direction: column;
            align-items: center;
        }
        
        .info-value {
            font-size: 1.2rem;
            font-weight: bold;
            color: #f39c12;
        }
        
        .game-area {
            flex: 1;
            display: flex;
            flex-direction: column;
            gap: 10px;
        }
        
        .carrom-board {
            width: 100%;
            flex: 1;
            background: linear-gradient(45deg, #e6d3a3, #d6c495);
            border: 15px solid #8b4513;
            border-radius: 10px;
            position: relative;
            overflow: hidden;
            box-shadow: 0 10px 20px rgba(0, 0, 0, 0.5);
        }
        
        .board-inner {
            position: absolute;
            top: 20px;
            left: 20px;
            right: 20px;
            bottom: 20px;
            border: 2px solid #8b4513;
            border-radius: 50%;
            overflow: hidden;
        }
        
        .center-circle {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            width: 60px;
            height: 60px;
            border: 2px solid #8b4513;
            border-radius: 50%;
            background: rgba(139, 69, 19, 0.1);
        }
        
        .pocket {
            position: absolute;
            width: 40px;
            height: 40px;
            background: #111;
            border-radius: 50%;
            box-shadow: inset 0 0 10px rgba(0, 0, 0, 0.8);
        }
        
        .pocket-tl { top: 0; left: 0; }
        .pocket-tr { top: 0; right: 0; }
        .pocket-bl { bottom: 0; left: 0; }
        .pocket-br { bottom: 0; right: 0; }
        
        .striker {
            position: absolute;
            width: 40px;
            height: 40px;
            background: linear-gradient(to bottom, #f1c40f, #f39c12);
            border-radius: 50%;
            box-shadow: 0 0 10px rgba(243, 156, 18, 0.7);
            z-index: 20;
            cursor: pointer;
            transition: transform 0.2s;
        }
        
        .coin {
            position: absolute;
            width: 30px;
            height: 30px;
            border-radius: 50%;
            box-shadow: 0 0 5px rgba(0, 0, 0, 0.5);
            z-index: 10;
        }
        
        .black-coin {
            background: linear-gradient(to bottom, #2c3e50, #000);
        }
        
        .white-coin {
            background: linear-gradient(to bottom, #ecf0f1, #bdc3c7);
        }
        
        .queen {
            background: linear-gradient(to bottom, #e74c3c, #c0392b);
            width: 32px;
            height: 32px;
            box-shadow: 0 0 8px rgba(231, 76, 60, 0.7);
        }
        
        .aim-line {
            position: absolute;
            height: 2px;
            background: rgba(255, 255, 255, 0.7);
            transform-origin: center left;
            display: none;
            z-index: 5;
        }
        
        .power-bar-container {
            position: absolute;
            bottom: 10px;
            left: 50%;
            transform: translateX(-50%);
            width: 200px;
            height: 15px;
            background: rgba(0, 0, 0, 0.5);
            border-radius: 10px;
            overflow: hidden;
            display: none;
            z-index: 25;
        }
        
        .power-bar {
            height: 100%;
            background: linear-gradient(to right, #2ecc71, #f1c40f, #e74c3c);
            width: 0%;
            transition: width 0.1s;
        }
        
        .controls {
            display: flex;
            justify-content: space-between;
            gap: 10px;
            margin-top: 10px;
        }
        
        .control-btn {
            flex: 1;
            padding: 15px;
            background: linear-gradient(to bottom, #3498db, #2980b9);
            border: none;
            border-radius: 10px;
            color: white;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.2s;
            font-size: 1rem;
        }
        
        .control-btn:active {
            transform: scale(0.95);
        }
        
        .shot-btn {
            background: linear-gradient(to bottom, #e74c3c, #c0392b);
        }
        
        .stats {
            display: flex;
            justify-content: space-around;
            background: rgba(0, 0, 0, 0.5);
            border-radius: 10px;
            padding: 10px;
            margin-top: 10px;
        }
        
        .stat {
            text-align: center;
            display: flex;
            flex-direction: column;
            align-items: center;
        }
        
        .stat-value {
            font-size: 1.2rem;
            color: #f39c12;
            font-weight: bold;
        }
        
        .turn-indicator {
            padding: 5px 10px;
            background: rgba(243, 156, 18, 0.3);
            border-radius: 5px;
            margin-top: 5px;
        }
        
        .message {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background: rgba(0, 0, 0, 0.8);
            border: 2px solid #f39c12;
            border-radius: 10px;
            padding: 20px;
            text-align: center;
            display: none;
            z-index: 100;
            box-shadow: 0 0 20px rgba(243, 156, 18, 0.5);
        }
        
        .message h3 {
            color: #f39c12;
            margin-bottom: 15px;
        }
        
        .message-btn {
            padding: 8px 16px;
            background: #3498db;
            border: none;
            border-radius: 5px;
            color: white;
            cursor: pointer;
            margin-top: 15px;
        }
        
        @media (min-width: 768px) {
            .container {
                max-width: 500px;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1>Carrom Pool</h1>
            <div class="game-info">
                <div class="info-item">
                    <span>Player</span>
                    <div class="info-value" id="player-score">0</div>
                </div>
                <div class="info-item">
                    <span>Turn</span>
                    <div class="turn-indicator" id="turn-indicator">Player 1</div>
                </div>
                <div class="info-item">
                    <span>Opponent</span>
                    <div class="info-value" id="opponent-score">0</div>
                </div>
            </div>
        </header>
        
        <div class="game-area">
            <div class="carrom-board" id="carrom-board">
                <div class="board-inner">
                    <div class="center-circle"></div>
                    <div class="pocket pocket-tl"></div>
                    <div class="pocket pocket-tr"></div>
                    <div class="pocket pocket-bl"></div>
                    <div class="pocket pocket-br"></div>
                    
                    <div class="striker" id="striker"></div>
                    <div class="aim-line" id="aim-line"></div>
                    <div class="power-bar-container" id="power-container">
                        <div class="power-bar" id="power-bar"></div>
                    </div>
                    
                    <!-- Coins will be added dynamically -->
                </div>
                
                <div class="message" id="message">
                    <h3 id="message-text">Welcome to Carrom Pool!</h3>
                    <p>Drag the striker to aim and release to shoot</p>
                    <button class="message-btn" id="start-btn">Start Game</button>
                </div>
            </div>
            
            <div class="stats">
                <div class="stat">
                    <div class="stat-value" id="black-coins">9</div>
                    <div class="stat-name">Black</div>
                </div>
                <div class="stat">
                    <div class="stat-value" id="white-coins">9</div>
                    <div class="stat-name">White</div>
                </div>
                <div class="stat">
                    <div class="stat-value" id="queen-status">1</div>
                    <div class="stat-name">Queen</div>
                </div>
            </div>
            
            <div class="controls">
                <button class="control-btn" id="aim-btn">Aim</button>
                <button class="control-btn shot-btn" id="shot-btn">Take Shot</button>
                <button class="control-btn" id="menu-btn">Menu</button>
            </div>
        </div>
    </div>

    <script>
        // Game state
        const gameState = {
            playerScore: 0,
            opponentScore: 0,
            blackCoins: 9,
            whiteCoins: 9,
            queenAvailable: true,
            currentPlayer: 1, // 1 for player, 2 for opponent
            isAiming: false,
            isPowering: false,
            power: 0,
            strikerPosition: { x: 0, y: 0 },
            aimAngle: 0,
            coins: [],
            isGameStarted: false
        };
        
        // DOM elements
        const carromBoard = document.getElementById('carrom-board');
        const boardInner = document.querySelector('.board-inner');
        const striker = document.getElementById('striker');
        const aimLine = document.getElementById('aim-line');
        const powerContainer = document.getElementById('power-container');
        const powerBar = document.getElementById('power-bar');
        const message = document.getElementById('message');
        const messageText = document.getElementById('message-text');
        const startBtn = document.getElementById('start-btn');
        const playerScore = document.getElementById('player-score');
        const opponentScore = document.getElementById('opponent-score');
        const blackCoinsElement = document.getElementById('black-coins');
        const whiteCoinsElement = document.getElementById('white-coins');
        const queenStatusElement = document.getElementById('queen-status');
        const turnIndicator = document.getElementById('turn-indicator');
        const aimBtn = document.getElementById('aim-btn');
        const shotBtn = document.getElementById('shot-btn');
        const menuBtn = document.getElementById('menu-btn');
        
        // Board dimensions
        let boardRect = boardInner.getBoundingClientRect();
        const boardCenterX = boardRect.width / 2;
        const boardCenterY = boardRect.height / 2;
        const boardRadius = boardRect.width / 2;
        
        // Initialize game
        function initGame() {
            // Set initial striker position
            gameState.strikerPosition = {
                x: boardCenterX,
                y: boardRect.height - 60
            };
            
            striker.style.left = gameState.strikerPosition.x + 'px';
            striker.style.top = gameState.strikerPosition.y + 'px';
            
            // Create coins
            createCoins();
            
            // Show start message
            message.style.display = 'block';
            
            // Add event listeners
            startBtn.addEventListener('click', startGame);
            aimBtn.addEventListener('click', startAiming);
            shotBtn.addEventListener('click', startPowering);
            menuBtn.addEventListener('click', showMenu);
            
            // Add touch/mouse events for aiming and shooting
            carromBoard.addEventListener('mousedown', handleAimStart);
            carromBoard.addEventListener('mousemove', handleAimMove);
            carromBoard.addEventListener('mouseup', handleAimEnd);
            
            carromBoard.addEventListener('touchstart', handleAimStart);
            carromBoard.addEventListener('touchmove', handleAimMove);
            carromBoard.addEventListener('touchend', handleAimEnd);
            
            // Update stats display
            updateStats();
        }
        
        // Create coins in starting position
        function createCoins() {
            // Clear existing coins
            document.querySelectorAll('.coin').forEach(coin => coin.remove());
            gameState.coins = [];
            
            // Create queen
            const queen = document.createElement('div');
            queen.className = 'coin queen';
            queen.style.left = boardCenterX + 'px';
            queen.style.top = boardCenterY + 'px';
            boardInner.appendChild(queen);
            
            gameState.coins.push({
                element: queen,
                type: 'queen',
                x: boardCenterX,
                y: boardCenterY,
                pocketed: false
            });
            
            // Create black and white coins in a circle pattern
            const radius = 80;
            const coinsCount = 9;
            const angles = [];
            
            // Calculate angles for coin placement
            for (let i = 0; i < coinsCount; i++) {
                angles.push((i * (2 * Math.PI)) / coinsCount);
            }
            
            // Create black coins
            for (let i = 0; i < coinsCount; i++) {
                const angle = angles[i];
                const x = boardCenterX + radius * Math.cos(angle);
                const y = boardCenterY + radius * Math.sin(angle);
                
                const coin = document.createElement('div');
                coin.className = 'coin black-coin';
                coin.style.left = x + 'px';
                coin.style.top = y + 'px';
                boardInner.appendChild(coin);
                
                gameState.coins.push({
                    element: coin,
                    type: 'black',
                    x: x,
                    y: y,
                    pocketed: false
                });
            }
            
            // Create white coins
            for (let i = 0; i < coinsCount; i++) {
                const angle = angles[i] + 0.2; // Slight offset from black coins
                const x = boardCenterX + (radius + 30) * Math.cos(angle);
                const y = boardCenterY + (radius + 30) * Math.sin(angle);
                
                const coin = document.createElement('div');
                coin.className = 'coin white-coin';
                coin.style.left = x + 'px';
                coin.style.top = y + 'px';
                boardInner.appendChild(coin);
                
                gameState.coins.push({
                    element: coin,
                    type: 'white',
                    x: x,
                    y: y,
                    pocketed: false
                });
            }
        }
        
        // Start the game
        function startGame() {
            message.style.display = 'none';
            gameState.isGameStarted = true;
            updateStats();
        }
        
        // Start aiming
        function startAiming() {
            if (!gameState.isGameStarted) return;
            
            gameState.isAiming = true;
            aimLine.style.display = 'block';
            powerContainer.style.display = 'block';
        }
        
        // Start powering up the shot
        function startPowering() {
            if (!gameState.isAiming) return;
            
            gameState.isPowering = true;
            gameState.power = 0;
            
            const powerInterval = setInterval(() => {
                if (gameState.isPowering && gameState.power < 100) {
                    gameState.power += 2;
                    powerBar.style.width = gameState.power + '%';
                } else {
                    clearInterval(powerInterval);
                    if (gameState.isPowering) {
                        takeShot();
                    }
                }
            }, 50);
        }
        
        // Take the shot
        function takeShot() {
            gameState.isPowering = false;
            gameState.isAiming = false;
            
            aimLine.style.display = 'none';
            powerContainer.style.display = 'none';
            
            // Calculate striker velocity based on power and angle
            const velocity = gameState.power / 5;
            const velocityX = velocity * Math.cos(gameState.aimAngle);
            const velocityY = velocity * Math.sin(gameState.aimAngle);
            
            // Move striker
            moveStriker(velocityX, velocityY);
            
            // Switch turns after a delay
            setTimeout(() => {
                switchTurn();
            }, 2000);
        }
        
        // Move striker with physics
        function moveStriker(vx, vy) {
            let x = gameState.strikerPosition.x;
            let y = gameState.strikerPosition.y;
            let friction = 0.96;
            
            const moveInterval = setInterval(() => {
                x += vx;
                y += vy;
                
                // Apply friction
                vx *= friction;
                vy *= friction;
                
                // Check boundaries
                const distanceFromCenter = Math.sqrt(
                    Math.pow(x - boardCenterX, 2) + 
                    Math.pow(y - boardCenterY, 2)
                );
                
                if (distanceFromCenter > boardRadius - 20) {
                    // Bounce off the edge
                    const angle = Math.atan2(y - boardCenterY, x - boardCenterX);
                    const normalAngle = angle + Math.PI;
                    
                    // Reflect velocity
                    const speed = Math.sqrt(vx * vx + vy * vy) * 0.8;
                    vx = Math.cos(normalAngle) * speed;
                    vy = Math.sin(normalAngle) * speed;
                }
                
                // Check if striker stopped
                if (Math.abs(vx) < 0.1 && Math.abs(vy) < 0.1) {
                    clearInterval(moveInterval);
                    
                    // Reset striker position
                    resetStriker();
                }
                
                // Update striker position
                striker.style.left = x + 'px';
           